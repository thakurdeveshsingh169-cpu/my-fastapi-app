<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğ•¯ğ–Šğ•¾ğ– ğ—”ğ¢ Snake</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#ffffff;
  --card:#2dff50;
  --text:#000000;
  --accent:#ffffff;
}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Poppins, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.screen{ display:none; max-width:400px; width:100%; text-align:center; }
.active{ display:block; }

.card{
  background:var(--card);
  padding:20px;
  border-radius:16px;
}

button{
  width:100%;
  padding:12px;
  margin:8px 0;
  border:none;
  border-radius:10px;
  background:var(--accent);
  color:#000;
  font-size:16px;
  font-weight:600;
  box-shadow: 0 0 2px rgb(0, 0, 0);
}

canvas{
  background:#949494;
  border:3px solid var(--accent);
  margin-top:10px;
}

select{
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:8px;
  border:none;
}

footer{
  position:fixed;
  bottom:04px;
  width:100%;
  text-align:center;
  font-family:Orbitron;
  opacity:.6;
}

.controls{
  margin-top:10px;
}

.controls .row{
  display:flex;
  justify-content:center;
}

.controls button{
  width:60px;
  height:60px;
  font-size:22px;
  margin:6px;
  border-radius:14px;
}

.controls .empty{
  visibility:hidden;
}
</style>
</head>

<body>

<audio id="eatSound" src="static/eat.mp3" preload="auto"></audio>
<audio id="clickSound" src="static/click.mp3" preload="auto"></audio>
<audio id="gameOverSound" src="static/gameover.mp3" preload="auto"></audio>


<!-- DASHBOARD -->
<div id="dashboard" class="screen active">
  <div class="card">
    <h2>ğŸ Snake Game</h2>
    <button onclick="playClick(); startCountdown()">PLAY</button>
    <button onclick="playClick(); showScreen('settings')">SETTINGS</button>
  </div>
</div>

<!-- SETTINGS -->
<div id="settings" class="screen">
  <div class="card">
    <h3>âš™ï¸ Settings</h3>

    <label>Game Mode</label>
    <select id="mode" onchange="playClick()">
      <option value="free">Free World</option>
      <option value="wall">Wall Kills</option>
    </select>

    <label>Difficulty</label>
    <select id="difficulty" onchange="playClick()">
      <option value="220">Easy</option>
      <option value="150">Medium</option>
      <option value="90">Hard</option>
    </select>

    <label>Snake Skin</label>
    <select id="skin" onchange="playClick()">
      <option value="#00ff99">Green</option>
      <option value="#ffffff">White</option>
      <option value="#000000">Black</option>
      <option value="#f1c27d">Skin</option>
    </select>

    <label>Theme</label>
    <select onchange="playClick(); changeTheme(this.value)">
      <option value="dark">Dark</option>
      <option value="light">Light</option>
    </select>

    <button onclick="playClick(); showScreen('dashboard')">BACK</button>
  </div>
</div>

<!-- GAME -->
<div id="gameScreen" class="screen">
  <h3 id="countdown"></h3>
  <canvas id="game" width="300" height="300"></canvas>

  <div class="controls">
    <div class="row">
      <button class="empty"></button>
      <button onclick="playClick(); setDir('UP')">â†‘</button>
      <button class="empty"></button>
    </div>

    <div class="row">
      <button onclick="playClick(); setDir('LEFT')">â†</button>
      <button class="empty"></button>
      <button onclick="playClick(); setDir('RIGHT')">â†’</button>
    </div>

    <div class="row">
      <button class="empty"></button>
      <button onclick="playClick(); setDir('DOWN')">â†“</button>
      <button class="empty"></button>
    </div>
  </div>
</div>

<footer>ğ•¯ğ–Šğ•¾ğ– ğ—”ğ¢ by-Shreya_Thakur & Team</footer>

<script>
const screens=document.querySelectorAll('.screen');

const eatSound=document.getElementById("eatSound");
const clickSound=document.getElementById("clickSound");
const gameOverSound=document.getElementById("gameOverSound");

function playClick(){
  clickSound.currentTime=0;
  clickSound.play();
}
function playEat(){
  eatSound.currentTime=0;
  eatSound.play();
}
function playGameOver(){
  gameOverSound.currentTime=0;
  gameOverSound.play();
}

function showScreen(id){
  screens.forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function changeTheme(t){
  if(t==='light'){
    document.documentElement.style.setProperty('--bg','#f5f5f5');
    document.documentElement.style.setProperty('--card','#fff');
    document.documentElement.style.setProperty('--text','#000');
  }else{
    document.documentElement.style.setProperty('--bg','#0f0f0f');
    document.documentElement.style.setProperty('--card','#1c1c1c');
    document.documentElement.style.setProperty('--text','#fff');
  }
}

/* GAME */
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d');

let snake, food;
let dir='RIGHT', nextDir='RIGHT';
let lastTime=0, delay=150;
let running=false;

function startCountdown(){
  showScreen('gameScreen');
  let c=3;
  const el=document.getElementById('countdown');
  el.innerText=c;
  const i=setInterval(()=>{
    c--;
    el.innerText=c>0?c:'GO!';
    if(c<0){
      clearInterval(i);
      el.innerText='';
      startGame();
    }
  },1000);
}

function startGame(){
  snake=[{x:140,y:140}];
  food=randomFood();
  dir=nextDir='RIGHT';
  delay=parseInt(document.getElementById('difficulty').value);
  running=true;
  lastTime=0;
  requestAnimationFrame(loop);
}

function loop(time){
  if(!running) return;
  if(time-lastTime>delay){
    update();
    draw();
    lastTime=time;
  }
  requestAnimationFrame(loop);
}

function randomFood(){
  return {
    x:Math.floor(Math.random()*15)*20,
    y:Math.floor(Math.random()*15)*20
  };
}

function update(){
  dir=nextDir;
  let h={...snake[0]};

  if(dir==='LEFT')h.x-=20;
  if(dir==='RIGHT')h.x+=20;
  if(dir==='UP')h.y-=20;
  if(dir==='DOWN')h.y+=20;

  if(document.getElementById('mode').value==='wall'){
    if(h.x<0||h.y<0||h.x>=300||h.y>=300){
      gameOver(); return;
    }
  }else{
    h.x=(h.x+300)%300;
    h.y=(h.y+300)%300;
  }

  if(snake.some(p=>p.x===h.x&&p.y===h.y)){
    gameOver(); return;
  }

  if(h.x===food.x&&h.y===food.y){
    playEat();
    food=randomFood();
  }else{
    snake.pop();
  }
  snake.unshift(h);
}

function draw(){
  ctx.clearRect(0,0,300,300);
  const color=document.getElementById('skin').value;
  snake.forEach((p,i)=>{
    ctx.fillStyle=i?'#ffffff':color;
    ctx.fillRect(p.x,p.y,20,20);
  });
  ctx.fillStyle='red';
  ctx.fillRect(food.x,food.y,20,20);
}

function gameOver(){
  running=false;
  playGameOver();
  setTimeout(()=>{
    alert("Game Over");
    location.reload();
  },300);
}

function setDir(d){
  if(d==='LEFT' && dir!=='RIGHT') nextDir='LEFT';
  if(d==='RIGHT' && dir!=='LEFT') nextDir='RIGHT';
  if(d==='UP' && dir!=='DOWN') nextDir='UP';
  if(d==='DOWN' && dir!=='UP') nextDir='DOWN';
}

document.addEventListener('keydown',e=>{
  if(e.key==='ArrowLeft') setDir('LEFT');
  if(e.key==='ArrowRight') setDir('RIGHT');
  if(e.key==='ArrowUp') setDir('UP');
  if(e.key==='ArrowDown') setDir('DOWN');
});
</script>

</body>
</html>


