<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Numpuzz â€” Wooden Sliding Puzzle</title>

<style>
:root{
  --board-size: 360px;
  --tile-gap: 12px;
  --tile-radius: 14px;
  --frame-wood: linear-gradient(180deg,#c78f53,#a96735);
  --tile-wood: linear-gradient(180deg,#ffdca8,#e6b77a);
  --tile-number: rgb(0, 0, 0);
}
html,body{
  height:100%;margin:0;
  font-family:'Segoe UI', Roboto, Arial;
  background:linear-gradient(180deg,#4a2b18,#2f1a11);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center
}
.wrap{width:100%;max-width:460px;padding:28px;box-sizing:border-box}
.card{
  background:var(--frame-wood);
  padding:18px;border-radius:18px;
  box-shadow:0 8px 30px rgba(0,0,0,.6),
  inset 0 6px 14px rgba(255,255,255,.02)
}
header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
h1{font-size:18px;margin:0;color:#ffdca8}
.controls{display:flex;gap:10px}
button{
  background:rgba(0,0,0,.12);
  border:none;padding:8px 12px;
  border-radius:10px;color:#fff;
  font-weight:600;cursor:pointer
}
button:active{transform:translateY(1px)}

.board-frame::before{
  content:'';
  position:absolute;
  inset:18px;           /* respects padding */
  border-radius:12px;
  pointer-events:none;
  background-image:linear-gradient(
    90deg,
    rgba(255,255,255,0.02) 0 1px,
    transparent 1px
  );
  opacity:0.06;
}

.board-frame{
  position: relative;   /* REQUIRED */
  overflow: hidden;     /* REQUIRED */
}

.board{
  width:100%;height:100%;
  display:grid;
  grid-template-columns:repeat(3,1fr);
  grid-template-rows:repeat(3,1fr);
  gap:var(--tile-gap)
}
.tile{
  display:flex;align-items:center;justify-content:center;
  font-size:74px;font-weight:650;
  color:var(--tile-number);
  border-radius:var(--tile-radius);
  cursor:pointer;
  background:var(--tile-wood);
  box-shadow:0 6px 10px rgba(0,0,0,.45);
  transition:transform .21s
}
.tile:active{transform:scale(.97)}
.empty{background:transparent;box-shadow:none;cursor:default}

.meta{display:flex;justify-content:space-between;margin-top:12px}
.counter{font-weight:800}

.overlay{
  position:fixed;inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:40
}
.overlay.show{display:flex}
.congrats{
  background:#fff;color:#474820;
  padding:28px;border-radius:14px;
  text-align:center
}
.btn-primary{
  background:linear-gradient(180deg,#ffa770,#f6b24f);
  padding:10px 14px;border:none;
  border-radius:10px;font-weight:700
}
canvas.confetti{
  position:fixed;inset:0;
  pointer-events:none;z-index:50
}
@media(max-width:420px){:root{--board-size:320px}}
</style>
</head>

<body>

<div class="wrap">
  <div class="card">
    <header>
      <h1>Numpuzz â€” Wooden Sliding Puzzle</h1>
      <div class="controls">
        <button id="shuffleBtn">Shuffle</button>
        <button id="resetBtn">Reset</button>
      </div>
    </header>

    <div class="board-frame">
      <div id="board" class="board"></div>
    </div>

    <div class="meta">
      <div>Moves: <span id="moves">0</span></div>
    </div>
  </div>
</div>

<div id="overlay" class="overlay">
  <div class="congrats">
    <h2>Congratulations!</h2>
    <p>You solved the puzzle.</p>
    <button id="playAgain" class="btn-primary">Play Again</button>
  </div>
</div>

<canvas id="confetti" class="confetti"></canvas>

<!-- ðŸ”Š Sounds -->
<audio id="clickSound" src="static/ai.mp3" preload="auto"></audio>
<audio id="winSound" src="static/win.mp3" preload="auto"></audio>

<script>
(() => {
const board = document.getElementById('board');
const movesEl = document.getElementById('moves');
const overlay = document.getElementById('overlay');

const clickSound = document.getElementById('clickSound');
const winSound = document.getElementById('winSound');
clickSound.volume = 0.4;
winSound.volume = 0.6;

let state=[1,2,3,4,5,6,7,8,0], moves=0;

function playSound(a){
  a.currentTime=0;
  a.play().catch(()=>{});
}

function render(){
  board.innerHTML='';
  state.forEach((v,i)=>{
    const t=document.createElement('div');
    t.className='tile'+(v===0?' empty':'');
    t.textContent=v||'';
    t.onclick=()=>move(i);
    board.appendChild(t);
  });
}

function move(i){
  const e=state.indexOf(0);
  const r=Math.abs(Math.floor(i/3)-Math.floor(e/3));
  const c=Math.abs(i%3-e%3);
  if(r+c===1){
    playSound(clickSound);
    [state[i],state[e]]=[state[e],state[i]];
    moves++;
    movesEl.textContent=moves;
    render();
    if(checkWin()) win();
  }
}

function checkWin(){
  return state.slice(0,8).every((v,i)=>v===i+1);
}

function win(){
  playSound(winSound);
  overlay.classList.add('show');
  startConfetti();
}

document.getElementById('shuffleBtn').onclick=()=>shuffle(150);
document.getElementById('resetBtn').onclick=reset;
document.getElementById('playAgain').onclick=()=>{
  overlay.classList.remove('show');
  stopConfetti();
  reset();
};

function reset(){
  state=[1,2,3,4,5,6,7,8,0];
  moves=0;
  movesEl.textContent=0;
  render();
}

function shuffle(n){
  for(let i=0;i<n;i++){
    const e=state.indexOf(0);
    const m=[e-1,e+1,e-3,e+3].filter(x=>x>=0&&x<9);
    const r=m[Math.floor(Math.random()*m.length)];
    [state[e],state[r]]=[state[r],state[e]];
  }
  moves=0;
  render();
}

/* confetti */
const canvas=document.getElementById('confetti');
const ctx=canvas.getContext('2d');
canvas.width=innerWidth;canvas.height=innerHeight;
let parts=[],run=false;

function startConfetti(){
  run=true;parts=[];
  for(let i=0;i<150;i++)
    parts.push({x:Math.random()*canvas.width,y:-20,vx:(Math.random()-.5)*5,vy:Math.random()*5});
  loop();
}
function stopConfetti(){run=false;ctx.clearRect(0,0,canvas.width,canvas.height);}
function loop(){
  if(!run)return;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  parts.forEach(p=>{
    p.y+=p.vy;p.x+=p.vx;p.vy+=0.2;
    ctx.fillRect(p.x,p.y,6,10);
  });
  requestAnimationFrame(loop);
}

shuffle(200);
})();
</script>

</body>
</html>


